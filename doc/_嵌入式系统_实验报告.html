<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title><嵌入式系统>实验报告</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><h1 id="嵌入式系统实验报告">&lt;嵌入式系统&gt;实验报告</h1>

<p>计54 陈宇 2015011343</p>



<h2 id="实验目的">实验目的</h2>

<p>测量树梅派和太阳能发电板等元器件的能耗与功率，探索用太阳能发电板给树梅派供电的解决方案。</p>



<h2 id="数据测量">数据测量</h2>



<h5 id="1-树梅派在标准负载下的功率消耗">1. 树梅派在标准负载下的功率消耗</h5>

<p>以下为几个不同场景的测量数据，测量方式均为每隔1分钟记录一次数据，共记录10次。</p>

<p>场景一：采用标准电源供电，带HDMI和键盘鼠标：</p>

<table>
<thead>
<tr>
  <th>#</th>
  <th>V</th>
  <th>A</th>
</tr>
</thead>
<tbody><tr>
  <td>1</td>
  <td>4.99</td>
  <td>0.64</td>
</tr>
<tr>
  <td>2</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
<tr>
  <td>3</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
<tr>
  <td>4</td>
  <td>4.99</td>
  <td>0.64</td>
</tr>
<tr>
  <td>5</td>
  <td>4.99</td>
  <td>0.64</td>
</tr>
<tr>
  <td>6</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
<tr>
  <td>7</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
<tr>
  <td>8</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
<tr>
  <td>9</td>
  <td>4.99</td>
  <td>0.64</td>
</tr>
<tr>
  <td>10</td>
  <td>4.99</td>
  <td>0.67</td>
</tr>
</tbody></table>


<p>注：标准电源指的是用USB电源适配器进行供电</p>

<p>场景二：标准电源供电，不带HDMI和键盘鼠标：</p>

<table>
<thead>
<tr>
  <th>#</th>
  <th>V</th>
  <th>A</th>
</tr>
</thead>
<tbody><tr>
  <td>1</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>2</td>
  <td>4.98</td>
  <td>0.52</td>
</tr>
<tr>
  <td>3</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>4</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>5</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>6</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>7</td>
  <td>4.98</td>
  <td>0.52</td>
</tr>
<tr>
  <td>8</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>9</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
<tr>
  <td>10</td>
  <td>4.98</td>
  <td>0.55</td>
</tr>
</tbody></table>


<p>场景三：充电包供电，不带HDMI和键盘鼠标：</p>

<table>
<thead>
<tr>
  <th>#</th>
  <th>V</th>
  <th>A</th>
</tr>
</thead>
<tbody><tr>
  <td>1</td>
  <td>5.07</td>
  <td>0.52</td>
</tr>
<tr>
  <td>2</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>3</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>4</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>5</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>6</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>7</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>8</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
<tr>
  <td>9</td>
  <td>5.07</td>
  <td>0.52</td>
</tr>
<tr>
  <td>10</td>
  <td>5.07</td>
  <td>0.55</td>
</tr>
</tbody></table>


<p>实验发现，HDMI不怎么耗电，而鼠标和键盘的耗电情况根据鼠标键盘自身的不同而不同。</p>



<h5 id="2-充电宝容量">2. 充电宝容量</h5>

<p>20000 × 3.7V * 1mAh = 74Wh</p>



<h5 id="3-太阳能电池功率太阳较充足测量经过dc-dc模块转换之后给充电包供电时的数据">3. 太阳能电池功率(太阳较充足，测量经过DC-DC模块转换之后给充电包供电时的数据)</h5>

<table>
<thead>
<tr>
  <th>#</th>
  <th>V</th>
  <th>A</th>
</tr>
</thead>
<tbody><tr>
  <td>1</td>
  <td>4.86</td>
  <td>0.87</td>
</tr>
<tr>
  <td>2</td>
  <td>4.87</td>
  <td>0.93</td>
</tr>
<tr>
  <td>3</td>
  <td>4.93</td>
  <td>1.08</td>
</tr>
<tr>
  <td>4</td>
  <td>4.94</td>
  <td>0.87</td>
</tr>
<tr>
  <td>5</td>
  <td>4.96</td>
  <td>1.02</td>
</tr>
<tr>
  <td>6</td>
  <td>4.96</td>
  <td>0.87</td>
</tr>
<tr>
  <td>7</td>
  <td>4.96</td>
  <td>0.87</td>
</tr>
<tr>
  <td>8</td>
  <td>4.96</td>
  <td>1.08</td>
</tr>
<tr>
  <td>9</td>
  <td>4.96</td>
  <td>0.90</td>
</tr>
<tr>
  <td>10</td>
  <td>4.96</td>
  <td>0.90</td>
</tr>
</tbody></table>




<h2 id="实验内容">实验内容</h2>

<p>在我的实验方案中，一共可以分为3个部分：</p>

<ol>
<li>树梅派：电源受wifi开关控制，其上面运行着心跳程序和监控程序，心跳程序每秒中将当前的状态报告给服务器，监控程序实时将当前的录像发送给手机</li>
<li>手机：提供无线热点供树梅派/wifi开关/服务器链接，其上面运行着监控程序的接收程序</li>
<li>服务器：能够控制wifi开关，接收树梅派心跳程序发来的数据</li>
</ol>

<p>原理图如下：</p>

<div align="center"><img src="images/1.png"></div>

<p>其中，服务器上运行着一个管理程序，主要具有两个功能：</p>

<ol>
<li>监控wifi开关和树梅派的状态</li>
<li>在检测到充电宝电量不足时，关闭树梅派的供电，等到有足够电量之后再打开</li>
</ol>

<p>管理程序运行截图如下：</p>

<p>监控界面：</p>

<div align="center"><img src="images/2.png"></div>

<p>控制界面：</p>

<div align="center"><img src="images/3.png"></div>

<p>其中，“延迟启动设置”是主动功能，效果是当前关闭树梅派，并在设置的之间之后再启动。</p>

<p>而“低电量重启设置”是被动功能，其工作模式如下：</p>

<div align="center"><img src="images/4.png"></div>



<h2 id="实验中遇到的问题">实验中遇到的问题</h2>

<p>从上面的数据测量中可以看出，在太阳光足够的情况下，太阳能发电板是可以供给树梅派的消耗的，但是实际情况中，晴天天气下足够的太阳光也只能维持不超过4个小时，在其他时间段的功率会大打折扣。</p>

<p>但是太阳能发电板并不是主要问题，这个实验中最严重的问题其实是充电宝，主要有以下问题：</p>

<ol>
<li>在使用太阳能发电板对充电宝进行充电的情况下，由于充电宝输入电压和电流有小幅度的波动，导致充电宝内部的保护机制会切断能量输出</li>
<li>充电宝在耗尽电量之后会切断能量输出，然后使用额外电源给充电包供电，但是在有足够电量之后，充电宝并不会自动重新供电，需要按下充电宝上面的按钮才会供电，导致我的设计中“低电量重启设置”功能并不能使用</li>
</ol>

<p>可以看出，充电宝其设计之初是给人使用的，所以其一些特性对于本实验造成了阻碍，将充电包换成普通蓄电池的话也许会好很多。</p>



<h2 id="理想实验方案">理想实验方案</h2>

<p>通过对本实验不足的地方进行分析，得出了我心目中较为理想的实验方案，如下：</p>

<div align="center"><img src="images/5.png"></div>

<p>主要电话是1. 将充电宝换成了蓄电池 和 2. 使用单独的电池对wifi开关进行供电</p>

<p>由于wifi开关的功耗低，实测只有0.1W不到，可以使用2节18650电池供电。每节18650电池的电压为3.7V，容量为1700~3350mAh，1700mAh的电池可以运行的时间为：</p>



<p><script type="math/tex; mode=display" id="MathJax-Element-7">
2 * 1700 / 1000 * 3.7 / 0.1 = 125.8h = 5.2天
</script></p>

<p>如果换用更高容量的电池供电时间会更长，对wifi开关单独供电是可行的。</p></div></body>
</html>